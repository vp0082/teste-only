<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>App - Teste 2</title>
    <!-- Carregando React via CDN para garantir que o JS chegue ao navegador -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
  </head>
  <body class="bg-slate-950 text-slate-50 font-sans">
    <div id="root">
      <div class="min-h-screen flex items-center justify-center">
        <div class="text-center">
          <h2 class="text-2xl font-bold animate-pulse">Carregando Interface...</h2>
          <p class="text-slate-500 mt-2">Se esta mensagem não sumir em 5 segundos, verifique o console.</p>
        </div>
      </div>
    </div>

    <script type="text/babel">
      const { useState, useEffect, useRef } = React;

      const App = () => {
        const [isMining, setIsMining] = useState(false);
        const [blocksSolved, setBlocksSolved] = useState(0);
        const [balance, setBalance] = useState(0);
        const [hashRate, setHashRate] = useState(45.2); // TH/s
        const [logs, setLogs] = useState([]);
        const [progress, setProgress] = useState(0);
        const logEndRef = useRef(null);

        // Generate random hash
        const generateHash = () => {
          const chars = '0123456789abcdef';
          let result = '0000'; // Simulate difficulty with leading zeros
          for (let i = 0; i < 60; i++) {
            result += chars.charAt(Math.floor(Math.random() * chars.length));
          }
          return result;
        };

        useEffect(() => {
          let interval;
          if (isMining) {
            interval = setInterval(() => {
              // Update logs
              const newHash = generateHash();
              setLogs(prev => [newHash, ...prev].slice(0, 15));

              // Update progress
              setProgress(prev => {
                const step = (hashRate / 100) + (Math.random() * 2);
                if (prev + step >= 100) {
                  // Block Solved!
                  setBlocksSolved(b => b + 1);
                  setBalance(bal => bal + 6.25);
                  return 0;
                }
                return prev + step;
              });
            }, 100);
          }
          return () => clearInterval(interval);
        }, [isMining, hashRate]);

        useEffect(() => {
          if (window.lucide) window.lucide.createIcons();
        }, [isMining]);

        const toggleMining = () => setIsMining(!isMining);
        const upgradeHardware = () => {
          if (balance >= 1) {
            setBalance(b => b - 1);
            setHashRate(h => h + 15.5);
          } else {
            alert("Saldo insuficiente! Você precisa de pelo menos 1.00 BTC para upgrade.");
          }
        };

        return (
          <div className="min-h-screen bg-[#0a0a0b] text-[#e2e2e4] font-mono p-4 md:p-8 flex flex-col items-center">
            {/* Header */}
            <header className="w-full max-w-5xl flex justify-between items-center mb-8 border-b border-[#1f1f23] pb-6">
              <div className="flex items-center gap-3">
                <div className={`p-2 rounded-lg ${isMining ? 'bg-amber-500/20 text-amber-500 animate-pulse' : 'bg-zinc-800 text-zinc-500'}`}>
                  <i data-lucide="cpu" className="w-6 h-6"></i>
                </div>
                <div>
                  <h1 className="text-xl font-bold tracking-tighter uppercase">CryptoCore Miner <span className="text-[10px] bg-zinc-800 px-2 py-0.5 rounded ml-2">v1.0.4-PRO</span></h1>
                  <p className="text-[10px] text-zinc-500 uppercase tracking-widest">Hardware ID: 0x882A-BF92-110C</p>
                </div>
              </div>
              <div className="text-right">
                <div className="text-xs text-zinc-500 uppercase">System Status</div>
                <div className={`text-xs font-bold uppercase ${isMining ? 'text-emerald-500' : 'text-rose-500'}`}>
                  {isMining ? '● Operational' : '○ Standby'}
                </div>
              </div>
            </header>

            <main className="w-full max-w-5xl grid grid-cols-1 lg:grid-cols-3 gap-6">
              {/* Stats Panel */}
              <div className="lg:col-span-2 space-y-6">
                <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                  <div className="bg-[#151518] border border-[#1f1f23] p-6 rounded-xl shadow-inner">
                    <div className="text-[10px] text-zinc-500 uppercase mb-2">Hashrate</div>
                    <div className="text-3xl font-bold text-amber-500">{hashRate.toFixed(1)} <span className="text-sm text-zinc-600">TH/s</span></div>
                  </div>
                  <div className="bg-[#151518] border border-[#1f1f23] p-6 rounded-xl shadow-inner">
                    <div className="text-[10px] text-zinc-500 uppercase mb-2">Blocks Solved</div>
                    <div className="text-3xl font-bold text-emerald-500">{blocksSolved}</div>
                  </div>
                  <div className="bg-[#151518] border border-[#1f1f23] p-6 rounded-xl shadow-inner">
                    <div className="text-[10px] text-zinc-500 uppercase mb-2">Total Balance</div>
                    <div className="text-3xl font-bold text-white">{balance.toFixed(4)} <span className="text-sm text-zinc-600">BTC</span></div>
                  </div>
                </div>

                {/* Mining Visualization */}
                <div className="bg-[#151518] border border-[#1f1f23] p-6 rounded-xl relative overflow-hidden">
                  <div className="flex justify-between items-center mb-4">
                    <div className="text-xs uppercase font-bold text-zinc-400 flex items-center gap-2">
                      <i data-lucide="activity" className="w-4 h-4"></i>
                      Network Difficulty Progress
                    </div>
                    <div className="text-xs font-bold text-amber-500">{progress.toFixed(1)}%</div>
                  </div>
                  
                  <div className="h-4 bg-black/50 rounded-full border border-zinc-800 overflow-hidden mb-6">
                    <div 
                      className="h-full bg-gradient-to-r from-amber-600 to-amber-400 transition-all duration-300 shadow-[0_0_15px_rgba(245,158,11,0.3)]"
                      style={{ width: `${progress}%` }}
                    ></div>
                  </div>

                  <div className="bg-black/40 p-4 rounded-lg border border-zinc-900 font-mono text-[10px] leading-relaxed overflow-hidden h-64">
                    <div className="text-zinc-600 mb-2 border-b border-zinc-800 pb-1">REAL-TIME HASH STREAM [SHA-256]</div>
                    {logs.length === 0 ? (
                      <div className="text-zinc-800 italic">Waiting for miner initialization...</div>
                    ) : (
                      logs.map((log, i) => (
                        <div key={i} className={`flex gap-4 ${i === 0 ? 'text-amber-400 font-bold' : 'text-zinc-500'}`}>
                          <span className="opacity-30">[{new Date().toLocaleTimeString()}]</span>
                          <span className="truncate">{log}</span>
                          <span className="text-zinc-700 ml-auto">NONCE: {Math.floor(Math.random() * 999999)}</span>
                        </div>
                      ))
                    )}
                  </div>
                </div>
              </div>

              {/* Controls Panel */}
              <div className="space-y-6">
                <div className="bg-[#151518] border border-[#1f1f23] p-6 rounded-xl">
                  <h2 className="text-xs uppercase font-bold text-zinc-400 mb-6 flex items-center gap-2">
                    <i data-lucide="settings" className="w-4 h-4"></i>
                    Miner Controls
                  </h2>
                  
                  <div className="space-y-4">
                    <button 
                      onClick={toggleMining}
                      className={`w-full py-4 rounded-lg font-bold uppercase tracking-widest transition-all flex items-center justify-center gap-2 ${
                        isMining 
                        ? 'bg-rose-500/10 text-rose-500 border border-rose-500/50 hover:bg-rose-500 hover:text-white' 
                        : 'bg-emerald-500 text-black hover:bg-emerald-400'
                      }`}
                    >
                      <i data-lucide={isMining ? "square" : "play"} className="w-5 h-5"></i>
                      {isMining ? 'Stop Mining' : 'Start Mining'}
                    </button>

                    <button 
                      onClick={upgradeHardware}
                      className="w-full py-4 bg-zinc-800 hover:bg-zinc-700 text-white rounded-lg font-bold uppercase tracking-widest transition-all border border-zinc-700 flex items-center justify-center gap-2"
                    >
                      <i data-lucide="zap" className="w-5 h-5 text-amber-500"></i>
                      Upgrade Hardware
                      <span className="text-[10px] bg-black/50 px-2 py-1 rounded ml-2">1.0 BTC</span>
                    </button>
                  </div>

                  <div className="mt-8 pt-8 border-t border-zinc-800 space-y-4">
                    <div className="flex justify-between text-[10px] uppercase">
                      <span className="text-zinc-500">Core Temp</span>
                      <span className={isMining ? 'text-amber-500' : 'text-emerald-500'}>{isMining ? '72°C' : '34°C'}</span>
                    </div>
                    <div className="flex justify-between text-[10px] uppercase">
                      <span className="text-zinc-500">Power Usage</span>
                      <span className="text-zinc-300">{isMining ? '850W' : '12W'}</span>
                    </div>
                    <div className="flex justify-between text-[10px] uppercase">
                      <span className="text-zinc-500">Fan Speed</span>
                      <span className="text-zinc-300">{isMining ? '4200 RPM' : '0 RPM'}</span>
                    </div>
                  </div>
                </div>

                <div className="bg-amber-500/5 border border-amber-500/20 p-4 rounded-xl">
                  <div className="flex gap-3">
                    <i data-lucide="info" className="w-5 h-5 text-amber-500 shrink-0"></i>
                    <p className="text-[10px] text-amber-200/60 leading-relaxed uppercase">
                      Mining rewards are simulated. Block reward set to 6.25 BTC. Hardware upgrades increase hash throughput.
                    </p>
                  </div>
                </div>
              </div>
            </main>

            <footer className="mt-auto pt-12 pb-6 text-[10px] text-zinc-700 uppercase tracking-[0.4em]">
              Encrypted Connection Secured | Node: 182.19.0.44
            </footer>
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<App />);
      
      // Initialize Lucide icons
      const initIcons = () => {
        if (window.lucide) {
          window.lucide.createIcons();
        } else {
          setTimeout(initIcons, 100);
        }
      };
      initIcons();
    </script>


  </body>
</html>
